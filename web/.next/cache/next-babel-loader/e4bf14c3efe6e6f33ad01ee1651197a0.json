{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useMeQuery } from \"@pebblo/frontend/src/generated/graphql\";\nimport { withApollo } from \"./withApolloHook\";\nexport function useIsAuthed(server) {\n  _s();\n\n  var _useMeQuery = useMeQuery(),\n      data = _useMeQuery.data,\n      loading = _useMeQuery.loading;\n\n  if (!loading && !(data === null || data === void 0 ? void 0 : data.me)) {\n    if (server) {\n      server.writeHead(302, {\n        Location: \"/login\"\n      });\n      server.end();\n    }\n  }\n}\n\n_s(useIsAuthed, \"m1hUDmmcxjNF1d/CmlKrRoQEru4=\", false, function () {\n  return [useMeQuery];\n});\n\nexport default withApollo({\n  ssr: true\n})(useIsAuthed);","map":{"version":3,"sources":["C:/Users/root/Desktop/dev/frontend/web/web/src/hooks/useIsAuthed.ts"],"names":["useMeQuery","withApollo","useIsAuthed","server","data","loading","me","writeHead","Location","end","ssr"],"mappings":";;AAGA,SAASA,UAAT,QAA2B,wCAA3B;AACA,SAASC,UAAT,QAA2B,kBAA3B;AAGA,OAAO,SAASC,WAAT,CAAqBC,MAArB,EAA8C;AAAA;;AAAA,oBACzBH,UAAU,EADe;AAAA,MAC3CI,IAD2C,eAC3CA,IAD2C;AAAA,MACrCC,OADqC,eACrCA,OADqC;;AAEnD,MAAG,CAACA,OAAD,IAAY,EAACD,IAAD,aAACA,IAAD,uBAACA,IAAI,CAAEE,EAAP,CAAf,EAA0B;AACxB,QAAGH,MAAH,EAAW;AACTA,MAAAA,MAAM,CAACI,SAAP,CAAiB,GAAjB,EAAsB;AACpBC,QAAAA,QAAQ,EAAE;AADU,OAAtB;AAGAL,MAAAA,MAAM,CAACM,GAAP;AACD;AACF;AACF;;GAVeP,W;UACYF,U;;;AAW5B,eAAeC,UAAU,CAAC;AAAES,EAAAA,GAAG,EAAE;AAAP,CAAD,CAAV,CAA0BR,WAA1B,CAAf","sourcesContent":["import { useQuery } from \"@apollo/client\"\r\nimport { useRouter } from \"next/router\";\r\nimport { Component, useEffect } from \"react\";\r\nimport { useMeQuery } from \"@pebblo/frontend/src/generated/graphql\";\r\nimport { withApollo } from \"./withApolloHook\";\r\nimport { ServerResponse } from \"http\";\r\n\r\nexport function useIsAuthed(server?: ServerResponse) {\r\n  const { data, loading } = useMeQuery();\r\n  if(!loading && !data?.me) {\r\n    if(server) {\r\n      server.writeHead(302, {\r\n        Location: \"/login\"\r\n      })\r\n      server.end()\r\n    }\r\n  }\r\n}\r\n\r\nexport default withApollo({ ssr: true })(useIsAuthed);"]},"metadata":{},"sourceType":"module"}