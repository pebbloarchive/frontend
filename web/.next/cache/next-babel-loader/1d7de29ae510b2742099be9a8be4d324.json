{"ast":null,"code":"import { useMeQuery } from \"@pebblo/frontend/src/generated/graphql\";\nimport { withApollo } from \"./withApolloHook\";\nexport function useIsAuthed(server) {\n  const {\n    data,\n    loading\n  } = useMeQuery();\n\n  if (!loading && !(data === null || data === void 0 ? void 0 : data.me)) {\n    if (server) {\n      server.writeHead(302, {\n        Location: \"/login\"\n      });\n      server.end();\n    }\n  }\n\n  console.log(loading, data);\n  return [loading, data];\n}\nexport default withApollo({\n  ssr: true\n})(useIsAuthed);","map":{"version":3,"sources":["C:/Users/root/Desktop/dev/frontend/web/web/src/hooks/useIsAuthed.ts"],"names":["useMeQuery","withApollo","useIsAuthed","server","data","loading","me","writeHead","Location","end","console","log","ssr"],"mappings":"AAGA,SAASA,UAAT,QAA2B,wCAA3B;AACA,SAASC,UAAT,QAA2B,kBAA3B;AAGA,OAAO,SAASC,WAAT,CAAqBC,MAArB,EAA8C;AACnD,QAAM;AAAEC,IAAAA,IAAF;AAAQC,IAAAA;AAAR,MAAoBL,UAAU,EAApC;;AACA,MAAG,CAACK,OAAD,IAAY,EAACD,IAAD,aAACA,IAAD,uBAACA,IAAI,CAAEE,EAAP,CAAf,EAA0B;AACxB,QAAGH,MAAH,EAAW;AACTA,MAAAA,MAAM,CAACI,SAAP,CAAiB,GAAjB,EAAsB;AACpBC,QAAAA,QAAQ,EAAE;AADU,OAAtB;AAGAL,MAAAA,MAAM,CAACM,GAAP;AACD;AACF;;AACDC,EAAAA,OAAO,CAACC,GAAR,CAAYN,OAAZ,EAAqBD,IAArB;AACA,SAAO,CAACC,OAAD,EAAUD,IAAV,CAAP;AACD;AAED,eAAeH,UAAU,CAAC;AAAEW,EAAAA,GAAG,EAAE;AAAP,CAAD,CAAV,CAA0BV,WAA1B,CAAf","sourcesContent":["import { useQuery } from \"@apollo/client\"\r\nimport { useRouter } from \"next/router\";\r\nimport { Component, useEffect } from \"react\";\r\nimport { useMeQuery } from \"@pebblo/frontend/src/generated/graphql\";\r\nimport { withApollo } from \"./withApolloHook\";\r\nimport { ServerResponse } from \"http\";\r\n\r\nexport function useIsAuthed(server?: ServerResponse) {\r\n  const { data, loading } = useMeQuery();\r\n  if(!loading && !data?.me) {\r\n    if(server) {\r\n      server.writeHead(302, {\r\n        Location: \"/login\"\r\n      })\r\n      server.end()\r\n    }\r\n  }\r\n  console.log(loading, data)\r\n  return [loading, data];\r\n}\r\n\r\nexport default withApollo({ ssr: true })(useIsAuthed);"]},"metadata":{},"sourceType":"module"}