{"ast":null,"code":"import { useEffect } from \"react\";\nimport { useMeQuery } from \"@pebblo/frontend/src/generated/graphql\";\nimport { withApollo } from \"./withApolloHook\";\nexport function useIsAuthed(server) {\n  const {\n    data,\n    loading\n  } = useMeQuery();\n  useEffect(() => {\n    if (!loading && (data === null || data === void 0 ? void 0 : data.me) === null) {\n      if (server) {\n        server.writeHead(302, {\n          Location: \"/login\"\n        });\n        server.end();\n      }\n    }\n  }, [loading, data]);\n}\nexport default withApollo({\n  ssr: true\n})(useIsAuthed);","map":{"version":3,"sources":["C:/Users/root/Desktop/dev/frontend/web/web/src/hooks/useIsAuthed.ts"],"names":["useEffect","useMeQuery","withApollo","useIsAuthed","server","data","loading","me","writeHead","Location","end","ssr"],"mappings":"AAEA,SAAoBA,SAApB,QAAqC,OAArC;AACA,SAASC,UAAT,QAA2B,wCAA3B;AACA,SAASC,UAAT,QAA2B,kBAA3B;AAGA,OAAO,SAASC,WAAT,CAAqBC,MAArB,EAA8C;AACnD,QAAM;AAAEC,IAAAA,IAAF;AAAQC,IAAAA;AAAR,MAAoBL,UAAU,EAApC;AACAD,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI,CAACM,OAAD,IAAY,CAAAD,IAAI,SAAJ,IAAAA,IAAI,WAAJ,YAAAA,IAAI,CAAEE,EAAN,MAAa,IAA7B,EAAmC;AACjC,UAAIH,MAAJ,EAAY;AACVA,QAAAA,MAAM,CAACI,SAAP,CAAiB,GAAjB,EAAsB;AACpBC,UAAAA,QAAQ,EAAE;AADU,SAAtB;AAGAL,QAAAA,MAAM,CAACM,GAAP;AACD;AACF;AACF,GATQ,EASN,CAACJ,OAAD,EAAUD,IAAV,CATM,CAAT;AAUD;AAED,eAAeH,UAAU,CAAC;AAAES,EAAAA,GAAG,EAAE;AAAP,CAAD,CAAV,CAA0BR,WAA1B,CAAf","sourcesContent":["import { useQuery } from \"@apollo/client\"\r\nimport { useRouter } from \"next/router\";\r\nimport { Component, useEffect } from \"react\";\r\nimport { useMeQuery } from \"@pebblo/frontend/src/generated/graphql\";\r\nimport { withApollo } from \"./withApolloHook\";\r\nimport { ServerResponse } from \"http\";\r\n\r\nexport function useIsAuthed(server?: ServerResponse) {\r\n  const { data, loading } = useMeQuery();\r\n  useEffect(() => {\r\n    if (!loading && data?.me === null) {\r\n      if (server) {\r\n        server.writeHead(302, {\r\n          Location: \"/login\"\r\n        })\r\n        server.end()\r\n      }\r\n    }\r\n  }, [loading, data]);\r\n}\r\n\r\nexport default withApollo({ ssr: true })(useIsAuthed);"]},"metadata":{},"sourceType":"module"}