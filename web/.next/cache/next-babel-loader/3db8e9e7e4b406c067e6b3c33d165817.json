{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState } from 'react';\nimport Head from 'next/head';\nimport styles from '../css/auth.module.css';\nimport Link from 'next/link';\nimport { useRouter } from 'next/router';\nimport { useMutation } from '@apollo/client';\nimport { login } from '../../graphql/mutations/login';\nimport { useAuth } from '../components/hooks/useAuth';\nimport { withApollo } from '../components/hooks/withApolloHook';\n\nconst Login = () => {\n  const router = useRouter();\n  const {\n    0: usernameOrEmail,\n    1: setEmail\n  } = useState(undefined);\n  const {\n    0: password,\n    1: setPassword\n  } = useState(undefined);\n  const {\n    me\n  } = useAuth();\n  if (me && false) router.push('/'); // const [handleLogin] = useMutation(login, {\n  //     variables: { usernameOrEmail, password },\n  //     onCompleted: (data) => data.login && router.push('/explore')\n  // });\n\n  const [handleLogin, {\n    data\n  }] = useMutation(login, {\n    variables: {\n      usernameOrEmail,\n      password\n    }\n  });\n  if (data === null || data === void 0 ? void 0 : data.login.errors) return /*#__PURE__*/_jsx(\"p\", {\n    children: JSON.stringify(data.login.errors)\n  });\n  if (data === null || data === void 0 ? void 0 : data.login) router.push('/');\n\n  const onSubmit = e => {\n    e.preventDefault();\n    handleLogin();\n  };\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(Head, {\n      children: /*#__PURE__*/_jsx(\"title\", {\n        children: \"Pebblo - Login\"\n      })\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: styles.auth_right,\n      children: /*#__PURE__*/_jsx(\"img\", {\n        src: \"images/svg/woman-bench.svg\"\n      })\n    }), /*#__PURE__*/_jsx(Link, {\n      href: \"/\",\n      children: /*#__PURE__*/_jsx(\"a\", {\n        href: \"/\",\n        className: styles.auth_go_back,\n        children: /*#__PURE__*/_jsx(\"span\", {})\n      })\n    }), /*#__PURE__*/_jsxs(\"form\", {\n      className: styles.auth_form,\n      onSubmit: onSubmit,\n      children: [/*#__PURE__*/_jsx(\"h1\", {\n        className: styles.auth_title,\n        children: \"Welcome back :)\"\n      }), /*#__PURE__*/_jsx(\"input\", {\n        className: styles.auth_form_username,\n        type: \"text\",\n        name: \"create_username\",\n        placeholder: \"Username or email\",\n        required: true,\n        onChange: e => setEmail(e.target.value)\n      }), /*#__PURE__*/_jsx(\"input\", {\n        className: styles.auth_form_password,\n        type: \"password\",\n        name: \"create_password\",\n        placeholder: \"Password\",\n        required: true,\n        onChange: e => setPassword(e.target.value)\n      }), /*#__PURE__*/_jsx(\"input\", {\n        type: \"submit\",\n        value: \"Login\"\n      })]\n    })]\n  });\n};\n\nLogin.theme = 'light';\nexport default withApollo(Login);","map":null,"metadata":{},"sourceType":"module"}